<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HorizonDatabasePlugin: SQLite3 Backend Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HorizonDatabasePlugin
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">SOCI wrapper for UE4(beta)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SQLite3 Backend Reference </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a href="#prerequisites">Prerequisites</a><ul>
<li><a href="#versions">Supported Versions</a></li>
<li><a href="#tested">Tested Platforms</a></li>
<li><a href="#required">Required Client Libraries</a></li>
</ul>
</li>
<li><a href="#connecting">Connecting to the Database</a></li>
<li><a href="#support">SOCI Feature Support</a><ul>
<li><a href="#dynamic">Dynamic Binding</a></li>
<li><a href="#name">Binding by Name</a></li>
<li><a href="#bulk">Bulk Operations</a></li>
<li><a href="#transactions">Transactions</a></li>
<li><a href="#blob">BLOB Data Type</a></li>
<li><a href="#rowid">RowID Data Type</a></li>
<li><a href="#nested">Nested Statements</a></li>
<li><a href="#stored">Stored Procedures</a></li>
</ul>
</li>
<li><a href="#native">Accessing the Native Database API</a></li>
<li><a href="#extensions">Backend-specific Extensions</a><ul>
<li><a href="#sqlite3result">SQLite3 result code support</a></li>
</ul>
</li>
<li><a href="#options">Configuration options</a></li>
</ul>
<h3><a class="anchor" id="prerequisites"></a> Prerequisites</h3>
<h4><a class="anchor" id="versions"></a> Supported Versions</h4>
<p>The SOCI SQLite3 backend is supported for use with SQLite3 &gt;= 3.1</p>
<h4><a class="anchor" id="tested"></a> Tested Platforms</h4>
<table class="doxtable">
</table>
<p>SQLite3 version</p>
<p>Operating System</p>
<p>Compiler </p>
<p>3.5.2</p>
<p>Mac OS X 10.5</p>
<p>g++ 4.0.1 </p>
<p>3.1.3</p>
<p>Mac OS X 10.4</p>
<p>g++ 4.0.1 </p>
<p>3.2.1</p>
<p>Linux i686 2.6.10-gentoo-r6</p>
<p>g++ 3.4.5 </p>
<p>3.3.4</p>
<p>Ubuntu 5.1</p>
<p>g++ 4.0.2 </p>
<p>3.3.4</p>
<p>Windows XP</p>
<p>(cygwin) g++ 3.3.4 </p>
<p>3.3.4</p>
<p>Windows XP</p>
<p>Visual C++ 2005 Express Edition </p>
<p>3.3.8</p>
<p>Windows XP</p>
<p>Visual C++ 2005 Professional </p>
<p>3.4.0</p>
<p>Windows XP</p>
<p>(cygwin) g++ 3.4.4 </p>
<p>3.4.0</p>
<p>Windows XP</p>
<p>Visual C++ 2005 Express Edition &lt;/tbody&gt; </p>
<h4><a class="anchor" id="required"></a> Required Client Libraries</h4>
<p>The SOCI SQLite3 backend requires SQLite3's <code>libsqlite3</code> client library.</p>
<h4><a class="anchor" id="connecting"></a> Connecting to the Database</h4>
<p>To establish a connection to the SQLite3 database, create a Session object using the <code>SQLite3</code> backend factory together with the database file name: </p><pre class="fragment">session sql(sqlite3, "database_filename");

// or:

session sql("sqlite3", "db=db.sqlite timeout=2 shared_cache=true");
</pre><p>The set of parameters used in the connection string for SQLite is:</p>
<ul>
<li><code>dbname</code> or <code>db</code></li>
<li><code>timeout</code> - set sqlite busy timeout (in seconds) (<a href="http://www.sqlite.org/c3ref/busy_timeout.html">link</a></li>
<li><code>synchronous</code> - set the pragma synchronous flag (<a href="http://www.sqlite.org/pragma.html#pragma_synchronous">link</a>)</li>
<li><code>shared_cache</code> - should be <code>true</code> (<a href="http://www.sqlite.org/c3ref/enable_shared_cache.html">link</a>)</li>
</ul>
<p>Once you have created a <code>session</code> object as shown above, you can use it to access the database, for example: </p><pre class="fragment">int count;
sql &lt;&lt; "select count(*) from invoices", into(count);
</pre><p>(See the <a href="../basics.html">SOCI basics</a> and <a href="../exchange.html">exchanging data</a> documentation for general information on using the <code>session</code> class.)</p>
<h3><a class="anchor" id="features"></a> SOCI Feature Support</h3>
<h4><a class="anchor" id="dynamic"></a> Dynamic Binding</h4>
<p>The SQLite3 backend supports the use of the SOCI <code>row</code> class, which facilitates retrieval of data whose type is not known at compile time.</p>
<p>When calling <code>row::get&lt;T&gt;()</code>, the type you should pass as T depends upon the underlying database type.</p>
<p>For the SQLite3 backend, this type mapping is complicated by the fact the SQLite3 does not enforce [types][INTEGER_PRIMARY_KEY] and makes no attempt to validate the type names used in table creation or alteration statements. SQLite3 will return the type as a string, SOCI will recognize the following strings and match them the corresponding SOCI types:</p>
<table class="doxtable">
</table>
<p>SQLite3 Data Type </p>
<p>SOCI Data Type </p>
<p><code>row::get&lt;T&gt;</code> specializations  </p>
<p>*float*, <em>double</em> </p>
<p><code>dt_double</code> </p>
<p><code>double</code>  </p>
<p>*int8*, <em>bigint</em> </p>
<p><code>dt_long_long</code> </p>
<p><code>long long</code>  </p>
<p>*unsigned big int* </p>
<p><code>dt_unsigned_long_long</code> </p>
<p><code>unsigned long long</code>  </p>
<p>*int*, <em>boolean</em> </p>
<p><code>dt_integer</code> </p>
<p><code>int</code>  </p>
<p>*text, <em>char</em> </p>
<p><code>dt_string</code> </p>
<p><code>std::string</code>  </p>
<p>*date*, <em>time</em> </p>
<p><code>dt_date</code> </p>
<p><code>std::tm</code>  &lt;/tbody&gt; </p>
<p>[INTEGER_PRIMARY_KEY] : There is one case where SQLite3 enforces type. If a column is declared as "integer primary key", then SQLite3 uses that as an alias to the internal ROWID column that exists for every table. Only integers are allowed in this column.</p>
<p>(See the <a href="../exchange.html#dynamic">dynamic resultset binding</a> documentation for general information on using the <code>row</code> class.)</p>
<h4><a class="anchor" id="name"></a> Binding by Name</h4>
<p>In addition to <a href="../exchange.html#bind_position">binding by position</a>, the SQLite3 backend supports <a href="../exchange.html#bind_name">binding by name</a>, via an overload of the <code><a class="el" href="namespacesoci.html#a9f59a2e8d19664d5e1eae175936f1b4e">use()</a></code> function: </p><pre class="fragment">int id = 7;
sql &lt;&lt; "select name from person where id = :id", use(id, "id")
</pre><p>The backend also supports the SQLite3 native numbered syntax, "one or more literals can be replace by a parameter "?" or ":AAA" or "" or "$VVV" where AAA is an alphanumeric identifier and VVV is a variable name according to the syntax rules of the TCL programming language." <a href="http://www.sqlite.org/capi3ref.html#sqlite3_bind_int">[1]</a>: </p><pre class="fragment">int i = 7;
int j = 8;
sql &lt;&lt; "insert into t(x, y) values(?, ?)", use(i), use(j);
</pre><h4><a class="anchor" id="bulk"></a> Bulk Operations</h4>
<p>The SQLite3 backend has full support for SOCI's <a href="../statements.html#bulk">bulk operations</a> interface. However, this support is emulated and is not native.</p>
<h4><a class="anchor" id="transactions"></a> Transactions</h4>
<p><a href="../statements.html#transactions">Transactions</a> are also fully supported by the SQLite3 backend.</p>
<h4><a class="anchor" id="blob"></a> BLOB Data Type</h4>
<p>The SQLite3 backend supports working with data stored in columns of type Blob, via SOCI's blob class. Because of SQLite3 general typelessness the column does not have to be declared any particular type.</p>
<h4><a class="anchor" id="rowid"></a> RowID Data Type</h4>
<p>In SQLite3 RowID is an integer. "Each entry in an SQLite table has a unique integer key called the "rowid". The rowid is always available as an undeclared column named ROWID, OID, or _ROWID_. If the table has a column of type INTEGER PRIMARY KEY then that column is another an alias for the rowid."<a href="http://www.sqlite.org/capi3ref.html#sqlite3_last_insert_rowid">[2]</a></p>
<h4><a class="anchor" id="nested"></a> Nested Statements</h4>
<p>Nested statements are not supported by SQLite3 backend.</p>
<h4><a class="anchor" id="stored"></a> Stored Procedures</h4>
<p>Stored procedures are not supported by SQLite3 backend</p>
<h3><a class="anchor" id="native"></a> Acessing the native database API</h3>
<p>SOCI provides access to underlying datbabase APIs via several <code>get_backend()</code> functions, as described in the <a href="../beyond.html">beyond SOCI</a> documentation.</p>
<p>The SQLite3 backend provides the following concrete classes for navite API access:</p>
<table class="doxtable">
</table>
<p>Accessor Function </p>
<p>Concrete Class  </p>
<p><code>session_backend* session::get_backend()</code> </p>
<p><code>sqlie3_session_backend</code>  </p>
<p><code>statement_backend* statement::get_backend()</code> </p>
<p><code>sqlite3_statement_backend</code>  </p>
<p><code>rowid_backend* rowid::get_backend()</code> </p>
<p><code>sqlite3_rowid_backend</code>  &lt;/tbody&gt; </p>
<h3><a class="anchor" id="extensions"></a> Backend-specific extensions</h3>
<h4><a class="anchor" id="sqlite3result"></a> SQLite3 result code support</h4>
<p>SQLite3 result code is provided via the backend specific <code>sqlite3_soci_error</code> class. Catching the backend specific error yields the value of SQLite3 result code via the <code>result()</code> method.</p>
<h3><a class="anchor" id="configuration"></a> Configuration options</h3>
<p>None </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
