<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HorizonDatabasePlugin: The mainpage documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HorizonDatabasePlugin
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">SOCI wrapper for UE4(beta)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The mainpage documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><hr/>
 <h2>License </h2>
<p>Boost Software License - Version 1.0 - 2016/10/06</p>
<p>Copyright (c) 2016 dorgon chang <a href="http://dorgon.horizon-studio.net/">http://dorgon.horizon-studio.net/</a></p>
<p>Permission is hereby granted, free of charge, to any person or organization obtaining a copy of the software and accompanying documentation covered by this license (the "Software") to use, reproduce, display, distribute, execute, and transmit the Software, and to prepare derivative works of the Software, and to permit third-parties to whom the Software is furnished to do so, all subject to the following:</p>
<p>The copyright notices in the Software and this entire statement, including the above license grant, this restriction and the following disclaimer, must be included in all copies of the Software, in whole or in part, and all derivative works of the Software, unless such copies or derivative works are solely in the form of machine-executable object code generated by a source language processor.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p><hr/>
 <h2>Introduction </h2>
<p>The goal of thie plugin is to provide a SOCI wrapper for UE4 and ORM ability.</p>
<p>What is SOCI? It is a C++ Database Access Library, you can check detail <a href="https://github.com/SOCI/soci">here</a>.</p>
<p>Please check <a href="https://github.com/dorgonman/HorizonDatabaseDemo">DemoProject</a> for how to use this plugin.</p>
<p>Support Email: <a href="#" onclick="location.href='mai'+'lto:'+'dor'+'go'+'nma'+'n@'+'hot'+'ma'+'il.'+'co'+'m'; return false;">dorgo<span style="display: none;">.nosp@m.</span>nman<span style="display: none;">.nosp@m.</span>@hotm<span style="display: none;">.nosp@m.</span>ail.<span style="display: none;">.nosp@m.</span>com</a></p>
<p>Blog: <a href="http://dorgon.horizon-studio.net/">http://dorgon.horizon-studio.net/</a></p>
<p>UE4 MarketPlace: <a href="https://www.unrealengine.com/marketplace/profile/dorgon%20chang">https://www.unrealengine.com/marketplace/profile/dorgon%20chang</a> </p><hr/>
 <h2>Current Database backend implementation status </h2>
<p><b>DB2</b>: not implemented</p>
<p><b>Firebird</b>: not implemented</p>
<p><b>MySQL</b>: not implemented</p>
<p><b>ODBC</b>: not implemented</p>
<p><b>Oracle</b>: not implemented</p>
<p><b>PostgreSQL</b>: not implemented</p>
<p><b>Sqlite3</b>: implemented </p><hr/>
 <h2>Tested Platform </h2>
<p><b>Tested Engine veriosn</b>: 4.13.</p>
<p><b>Windows</b>: tested.</p>
<p><b>MACOSX</b>: tested.</p>
<p><b>Android</b>: tested, need cherry pick this <a href="https://github.com/dorgonman/UnrealEngine/commit/ba8b2df57b067aa461f4d3fc4d0703d2ff1041aa" title="Enable Rtti and Exception">commit</a> and rebuild engine source code.</p>
<p><b>iOS</b>: not tested, need cherry pick this <a href="https://github.com/dorgonman/UnrealEngine/commit/ba8b2df57b067aa461f4d3fc4d0703d2ff1041aa" title="Enable Rtti and Exception">commit</a> and rebuild engine source code.</p>
<p><b>Linux</b>: not tested.</p>
<hr/>
 <h2>TestCase: ORMTestImplement </h2>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> ORMTestImplement(FAutomationTestBase* pTestCase, <a class="code" href="class_a_horizon_database.html">AHorizonDatabase</a>* pDB) </div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> pStruct = FHorizonTestDBTable1::StaticStruct();</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//============================create database==============================</span></div><div class="line">    pDB-&gt;<a class="code" href="class_a_horizon_database.html#a1cbf6f8a46ad4cf121e54b0043b1e13a">CreateTable</a>(pStruct);</div><div class="line"></div><div class="line">    <span class="comment">//============================test data===================================</span></div><div class="line">    <a class="code" href="struct_f_horizon_test_d_b_table1_bulk_data.html">FHorizonTestDBTable1BulkData</a> bulkData;</div><div class="line">    <a class="code" href="struct_f_horizon_test_d_b_table1.html">FHorizonTestDBTable1</a> a0;</div><div class="line">    a0.<a class="code" href="struct_f_horizon_test_d_b_table1.html#ac5d6fd2ebb998c89ce8adf2fd8ccf78e">Id</a> = 0;</div><div class="line">    a0.<a class="code" href="struct_f_horizon_test_d_b_table1.html#a0d9a8ba8d523c9f49cb265eb1f95fef6">TestString</a> = <span class="stringliteral">&quot;test a0&quot;</span>;</div><div class="line">    a0.<a class="code" href="struct_f_horizon_test_d_b_table1.html#a6a965afaa0f46a5090a31776ed2bf830">TestFloat</a> = 1.333f;</div><div class="line">    a0.<a class="code" href="struct_f_horizon_test_d_b_table1.html#ad7a7b812a81b0e30ee45ab7c7fbb75e4">bTest1</a> = <span class="keyword">true</span>;</div><div class="line">    <a class="code" href="struct_f_horizon_test_d_b_table1.html">FHorizonTestDBTable1</a> a1;</div><div class="line">    a1.<a class="code" href="struct_f_horizon_test_d_b_table1.html#ac5d6fd2ebb998c89ce8adf2fd8ccf78e">Id</a> = 1;</div><div class="line">    a1.<a class="code" href="struct_f_horizon_test_d_b_table1.html#a0d9a8ba8d523c9f49cb265eb1f95fef6">TestString</a> = <span class="stringliteral">&quot;test a1&quot;</span>;</div><div class="line">    a1.<a class="code" href="struct_f_horizon_test_d_b_table1.html#a6a965afaa0f46a5090a31776ed2bf830">TestFloat</a> = 2.3333f;</div><div class="line">    a1.<a class="code" href="struct_f_horizon_test_d_b_table1.html#ad7a7b812a81b0e30ee45ab7c7fbb75e4">bTest1</a> = <span class="keyword">false</span>;</div><div class="line">    <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#aeb439711c592e1047a463b3f1eee063a">UHorizonTestDBTable1FunctionLibrary::BulkInsert</a>(bulkData, a0);</div><div class="line">    <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#aeb439711c592e1047a463b3f1eee063a">UHorizonTestDBTable1FunctionLibrary::BulkInsert</a>(bulkData, a1);</div><div class="line">    <span class="keyword">auto</span> insertSQL = <a class="code" href="class_a_horizon_database.html#a3481547ed3fe1dcd6a4e975264cf731d">AHorizonDatabase::GetInsertSQLUseStmt</a>(pStruct);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//============================insert row==================================</span></div><div class="line"></div><div class="line">    <span class="keywordflow">try</span> {</div><div class="line">        <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#aa717ee437875e00d0026ff86a309d1ee">UHorizonTestDBTable1FunctionLibrary::BulkExec</a>(pDB, insertSQL, bulkData);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">catch</span> (std::exception&amp; e) {</div><div class="line">        pTestCase-&gt;AddError(FString::Printf(TEXT(<span class="stringliteral">&quot;insertSQL exception: %s&quot;</span>), *FString(e.what())));</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">//============================select single row==================================</span></div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> data0 = <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#acd716f7fde3601cbd9e3abdfa712177f">UHorizonTestDBTable1FunctionLibrary::QueryData</a>(pDB, <span class="stringliteral">&quot;WHERE Id = 0&quot;</span>);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;data0 == a0&quot;</span>), data0, a0);</div><div class="line">        <span class="keyword">auto</span> data1 = <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#acd716f7fde3601cbd9e3abdfa712177f">UHorizonTestDBTable1FunctionLibrary::QueryData</a>(pDB, <span class="stringliteral">&quot;WHERE Id = 1&quot;</span>);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;data1 == a1&quot;</span>), data1, a1);</div><div class="line">    }</div><div class="line">    <span class="comment">//=======================================================================</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//============================select multi row==================================</span></div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> rowSet = <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#a19901d186ccd7e50533137c35868da0f">UHorizonTestDBTable1FunctionLibrary::QueryMultiData</a>(pDB);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;rowSet.Num() == 2&quot;</span>), rowSet.Num(), 2);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;rowSet[0] == a0&quot;</span>), rowSet[0], a0);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;rowSet[1] == a1&quot;</span>), rowSet[1], a1);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//============================select single tuple=======================================</span></div><div class="line"></div><div class="line">    {</div><div class="line">        <span class="keyword">enum</span> { Id, TestString };</div><div class="line">        std::tuple&lt;int, FString&gt; dataTuple;</div><div class="line"></div><div class="line">        pDB-&gt;<a class="code" href="class_a_horizon_database.html#a5e910de7154debb5d8d9168165be2c27">QueryData</a>(FHorizonTestDBTable1::StaticStruct()-&gt;GetName(), <span class="stringliteral">&quot;Id, TestString&quot;</span>, dataTuple, <span class="stringliteral">&quot;WHERE Id = 0&quot;</span>);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;Id should equal to a0.Id&quot;</span>), std::get&lt;Id&gt;(dataTuple), a0.<a class="code" href="struct_f_horizon_test_d_b_table1.html#ac5d6fd2ebb998c89ce8adf2fd8ccf78e">Id</a>);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;TestString should equal to a0.TestString&quot;</span>), std::get&lt;TestString&gt;(dataTuple), a0.<a class="code" href="struct_f_horizon_test_d_b_table1.html#a0d9a8ba8d523c9f49cb265eb1f95fef6">TestString</a>);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//============================select multi tuple=======================================</span></div><div class="line"></div><div class="line">    {</div><div class="line">        <span class="keyword">enum</span> { Id, TestString };</div><div class="line">        std::tuple&lt;int, FString&gt; dataTuple;</div><div class="line"></div><div class="line">        <span class="keyword">auto</span> rowSet = pDB-&gt;<a class="code" href="class_a_horizon_database.html#a64abcd7c8aa6b8b9e5889876443773db">QueryMultiData</a>&lt;decltype(dataTuple)&gt;(FHorizonTestDBTable1::StaticStruct()-&gt;GetName(), <span class="stringliteral">&quot;Id, TestString&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">        <span class="keyword">auto</span> rowIt = rowSet.begin();</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;Id should equal to a0.Id&quot;</span>), std::get&lt;Id&gt;(*rowIt), a0.<a class="code" href="struct_f_horizon_test_d_b_table1.html#ac5d6fd2ebb998c89ce8adf2fd8ccf78e">Id</a>);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;TestString should equal to a0.TestString&quot;</span>), std::get&lt;TestString&gt;(*rowIt), a0.<a class="code" href="struct_f_horizon_test_d_b_table1.html#a0d9a8ba8d523c9f49cb265eb1f95fef6">TestString</a>);</div><div class="line">        rowIt++;</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;Id should equal to a1.Id&quot;</span>), std::get&lt;Id&gt;(*rowIt), a1.<a class="code" href="struct_f_horizon_test_d_b_table1.html#ac5d6fd2ebb998c89ce8adf2fd8ccf78e">Id</a>);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;TestString should equal to a1.TestString&quot;</span>), std::get&lt;TestString&gt;(*rowIt), a1.<a class="code" href="struct_f_horizon_test_d_b_table1.html#a0d9a8ba8d523c9f49cb265eb1f95fef6">TestString</a>);</div><div class="line"></div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//=============================UpdateData===============================================</span></div><div class="line"></div><div class="line">    {</div><div class="line">        pDB-&gt;<a class="code" href="class_a_horizon_database.html#a052280e54568f614e0e680fefffac02d">UpdateData</a>(FHorizonTestDBTable1::StaticStruct()-&gt;GetName(), <span class="stringliteral">&quot;TestString=&#39;abc&#39;, TestFloat=4.3333&quot;</span>, <span class="stringliteral">&quot;WHERE Id = 0&quot;</span>);</div><div class="line">        <span class="keyword">auto</span> data0 = <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#acd716f7fde3601cbd9e3abdfa712177f">UHorizonTestDBTable1FunctionLibrary::QueryData</a>(pDB, <span class="stringliteral">&quot;WHERE Id = 0&quot;</span>);</div><div class="line">        pTestCase-&gt;TestNotEqual(TEXT(<span class="stringliteral">&quot;data0 != a0&quot;</span>), data0, a0);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//=================================DeleteData======================================</span></div><div class="line"></div><div class="line">    {</div><div class="line">        pDB-&gt;<a class="code" href="class_a_horizon_database.html#a1e516233a879061d4c83175cd1d3951c">DeleteData</a>(FHorizonTestDBTable1::StaticStruct()-&gt;GetName(), <span class="stringliteral">&quot;WHERE Id = 0&quot;</span>);</div><div class="line">        <span class="keyword">auto</span> rowSet = <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#a19901d186ccd7e50533137c35868da0f">UHorizonTestDBTable1FunctionLibrary::QueryMultiData</a>(pDB);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;rowSet.Num() == 1&quot;</span>), rowSet.Num(), 1);</div><div class="line">    }</div><div class="line">    {</div><div class="line">        pDB-&gt;<a class="code" href="class_a_horizon_database.html#a1e516233a879061d4c83175cd1d3951c">DeleteData</a>(FHorizonTestDBTable1::StaticStruct()-&gt;GetName(), <span class="stringliteral">&quot;WHERE Id = 1&quot;</span>);</div><div class="line">        <span class="keyword">auto</span> rowSet = <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#a19901d186ccd7e50533137c35868da0f">UHorizonTestDBTable1FunctionLibrary::QueryMultiData</a>(pDB);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;rowSet.Num() == 0&quot;</span>), rowSet.Num(), 0);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    {</div><div class="line">        <span class="keywordflow">try</span></div><div class="line">        {</div><div class="line">            { <span class="comment">//insert test data</span></div><div class="line">                <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#aa717ee437875e00d0026ff86a309d1ee">UHorizonTestDBTable1FunctionLibrary::BulkExec</a>(pDB, insertSQL, bulkData);</div><div class="line">                <span class="keyword">auto</span> rowSet = <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#a19901d186ccd7e50533137c35868da0f">UHorizonTestDBTable1FunctionLibrary::QueryMultiData</a>(pDB);</div><div class="line">                pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;rowSet.Num() == 2&quot;</span>), rowSet.Num(), 2);</div><div class="line">            }</div><div class="line">            pDB-&gt;<a class="code" href="class_a_horizon_database.html#a1e516233a879061d4c83175cd1d3951c">DeleteData</a>(FHorizonTestDBTable1::StaticStruct()-&gt;GetName(), <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            <span class="keyword">auto</span> rowSet = <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#a19901d186ccd7e50533137c35868da0f">UHorizonTestDBTable1FunctionLibrary::QueryMultiData</a>(pDB);</div><div class="line">            pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;rowSet.Num() == 0&quot;</span>), rowSet.Num(), 0);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">catch</span> (std::exception&amp; e) {</div><div class="line">            pTestCase-&gt;AddError(FString::Printf(TEXT(<span class="stringliteral">&quot;insertSQL exception: %s&quot;</span>), *FString(e.what())));</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">//=================================TruncateTable======================================</span></div><div class="line">    {</div><div class="line">        { <span class="comment">//insert test data</span></div><div class="line">            <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#aa717ee437875e00d0026ff86a309d1ee">UHorizonTestDBTable1FunctionLibrary::BulkExec</a>(pDB, insertSQL, bulkData);</div><div class="line">            <span class="keyword">auto</span> rowSet = <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#a19901d186ccd7e50533137c35868da0f">UHorizonTestDBTable1FunctionLibrary::QueryMultiData</a>(pDB);</div><div class="line">            pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;rowSet.Num() == 2&quot;</span>), rowSet.Num(), 2);</div><div class="line">        }</div><div class="line">        pDB-&gt;<a class="code" href="class_a_horizon_database.html#a60eb7ae2e5aae1b8675dc9c7d530b0a7">TruncateTable</a>(FHorizonTestDBTable1::StaticStruct()-&gt;GetName());</div><div class="line">        <span class="keyword">auto</span> rowSet = <a class="code" href="class_u_horizon_test_d_b_table1_function_library.html#a19901d186ccd7e50533137c35868da0f">UHorizonTestDBTable1FunctionLibrary::QueryMultiData</a>(pDB);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;rowSet.Num() == 0&quot;</span>), rowSet.Num(), 0);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//================================DropTable============================================</span></div><div class="line">    {</div><div class="line">        <span class="keywordflow">try</span></div><div class="line">        {</div><div class="line">            pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;bTableExists == true&quot;</span>), pDB-&gt;<a class="code" href="class_a_horizon_database.html#a916d0e52c406b1e46e634ab126df22c9">IsTableExists</a>(FHorizonTestDBTable1::StaticStruct()-&gt;GetName()), <span class="keyword">true</span>);</div><div class="line">            pDB-&gt;<a class="code" href="class_a_horizon_database.html#a9a407f4dd94aea345d42294fb730e98a">DropTable</a>(FHorizonTestDBTable1::StaticStruct()-&gt;GetName());</div><div class="line">            pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;bTableExists == false&quot;</span>), pDB-&gt;<a class="code" href="class_a_horizon_database.html#a916d0e52c406b1e46e634ab126df22c9">IsTableExists</a>(FHorizonTestDBTable1::StaticStruct()-&gt;GetName()), <span class="keyword">false</span>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">catch</span> (std::exception&amp; e) {</div><div class="line">            pTestCase-&gt;AddError(FString::Printf(TEXT(<span class="stringliteral">&quot;drop table exception: %s&quot;</span>), *FString(e.what())));</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><hr/>
<hr/>
 <h2>TestCase: SimpleTestImplement </h2>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> SimpleTestImplement(FAutomationTestBase* pTestCase, <a class="code" href="class_a_horizon_database.html">AHorizonDatabase</a>* pDB) </div><div class="line">{</div><div class="line">    pDB-&gt;<a class="code" href="class_a_horizon_database.html#ae0739abeb3ccd2da8c5358e47d410d83">ExecuteSQL</a>(<span class="stringliteral">&quot;drop table if exists TestCase1&quot;</span>);</div><div class="line">    pDB-&gt;<a class="code" href="class_a_horizon_database.html#ae0739abeb3ccd2da8c5358e47d410d83">ExecuteSQL</a>(<span class="stringliteral">&quot;create table TestCase1(&quot;</span></div><div class="line">        <span class="stringliteral">&quot;id integer,&quot;</span></div><div class="line">        <span class="stringliteral">&quot;name varchar(100))&quot;</span>);</div><div class="line">    pDB-&gt;<a class="code" href="class_a_horizon_database.html#ae0739abeb3ccd2da8c5358e47d410d83">ExecuteSQL</a>(<span class="stringliteral">&quot;insert into TestCase1(id, name) values(7, \&#39;John\&#39;)&quot;</span>);</div><div class="line">    <span class="comment">// fundamental type</span></div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> myId = 0;</div><div class="line">        std::string myName;</div><div class="line">        pDB-&gt;<a class="code" href="class_a_horizon_database.html#a5e910de7154debb5d8d9168165be2c27">QueryData</a>(<span class="stringliteral">&quot;TestCase1&quot;</span>, <span class="stringliteral">&quot;id&quot;</span>, myId, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;myId should equal to 7&quot;</span>), myId, 7);</div><div class="line">        pDB-&gt;<a class="code" href="class_a_horizon_database.html#a5e910de7154debb5d8d9168165be2c27">QueryData</a>(<span class="stringliteral">&quot;TestCase1&quot;</span>, <span class="stringliteral">&quot;name&quot;</span>, myName, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;myName should equal to John&quot;</span>), myName, std::string(<span class="stringliteral">&quot;John&quot;</span>));</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//std::tuple</span></div><div class="line">    {</div><div class="line">        <span class="keyword">enum</span> { id, name };</div><div class="line">        std::tuple&lt;int, std::string&gt; dataTuple;</div><div class="line"></div><div class="line">        pDB-&gt;<a class="code" href="class_a_horizon_database.html#a5e910de7154debb5d8d9168165be2c27">QueryData</a>(<span class="stringliteral">&quot;TestCase1&quot;</span>, <span class="stringliteral">&quot;id, name&quot;</span>, dataTuple, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;id should equal to 7&quot;</span>), std::get&lt;id&gt;(dataTuple), 7);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;name should equal to John&quot;</span>), std::get&lt;name&gt;(dataTuple), std::string(<span class="stringliteral">&quot;John&quot;</span>));</div><div class="line">    }</div><div class="line"></div><div class="line">    {</div><div class="line">        <span class="keyword">enum</span> { id, name };</div><div class="line">        std::tuple&lt;int, FString&gt; dataTuple;</div><div class="line"></div><div class="line">        pDB-&gt;<a class="code" href="class_a_horizon_database.html#a5e910de7154debb5d8d9168165be2c27">QueryData</a>(<span class="stringliteral">&quot;TestCase1&quot;</span>, <span class="stringliteral">&quot;id, name&quot;</span>, dataTuple, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;id should equal to 7&quot;</span>), std::get&lt;id&gt;(dataTuple), 7);</div><div class="line">        pTestCase-&gt;TestEqual(TEXT(<span class="stringliteral">&quot;name should equal to John&quot;</span>), std::get&lt;name&gt;(dataTuple), FString(<span class="stringliteral">&quot;John&quot;</span>));</div><div class="line">    }</div><div class="line"></div><div class="line">    pDB-&gt;<a class="code" href="class_a_horizon_database.html#ae0739abeb3ccd2da8c5358e47d410d83">ExecuteSQL</a>(<span class="stringliteral">&quot;drop table if exists TestCase1&quot;</span>);</div><div class="line">}</div></div><!-- fragment --><hr/>
<hr/>
 <h2>TestCase: SociSqlite3, use soci api directly </h2>
<div class="fragment"><div class="line">IMPLEMENT_SIMPLE_AUTOMATION_TEST(FHorizonSqlite3RowID, <span class="stringliteral">&quot;Horizon.SOCI.Sqlite3.UnitTest.[sqlite][rowid][oid]&quot;</span>, EAutomationTestFlags::ApplicationContextMask | EAutomationTestFlags::ProductFilter)</div><div class="line">bool FHorizonSqlite3RowID::RunTest(const FString&amp; Parameters)</div><div class="line">{</div><div class="line">    <span class="keywordtype">bool</span> bResult = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">    <a class="code" href="classsoci_1_1session.html">soci::session</a> sql(<a class="code" href="test-db2_8cpp.html#a309d5a2c70059eea6a837ea7f1e80958">backEnd</a>, <a class="code" href="test-db2_8cpp.html#ae915c40e51ff21764f98faa8bd2b68d3">connectString</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">try</span> { sql &lt;&lt; <span class="stringliteral">&quot;drop table if exists test1&quot;</span>; }</div><div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="classsoci_1_1soci__error.html">soci::soci_error</a> <span class="keyword">const</span> &amp;) {} <span class="comment">// ignore if error</span></div><div class="line"></div><div class="line">    sql &lt;&lt;</div><div class="line">        <span class="stringliteral">&quot;create table test1 (&quot;</span></div><div class="line">        <span class="stringliteral">&quot;    id integer,&quot;</span></div><div class="line">        <span class="stringliteral">&quot;    name varchar(100)&quot;</span></div><div class="line">        <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"></div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into test1(id, name) values(7, \&#39;John\&#39;)&quot;</span>;</div><div class="line"></div><div class="line">    <a class="code" href="classsoci_1_1rowid.html">soci::rowid</a> rid(sql);</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;select oid from test1 where id = 7&quot;</span>, <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">into</a>(rid);</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> id;</div><div class="line">    std::string name;</div><div class="line"></div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;select id, name from test1 where oid = :rid&quot;</span>,</div><div class="line">        <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">soci::into</a>(<span class="keywordtype">id</span>), <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">soci::into</a>(name), <a class="code" href="namespacesoci.html#a9f59a2e8d19664d5e1eae175936f1b4e">soci::use</a>(rid);</div><div class="line"></div><div class="line">    FString name2;</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;select id, name from test1 where oid = :rid&quot;</span>,</div><div class="line">        <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">soci::into</a>(<span class="keywordtype">id</span>), <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">soci::into</a>(name2), <a class="code" href="namespacesoci.html#a9f59a2e8d19664d5e1eae175936f1b4e">soci::use</a>(rid);</div><div class="line"></div><div class="line"></div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;Id should equal to 7&quot;</span>), <span class="keywordtype">id</span>, 7);</div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;Name should equal to John&quot;</span>), name, std::string(<span class="stringliteral">&quot;John&quot;</span>));</div><div class="line"></div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;drop table test1&quot;</span>;</div><div class="line">    <span class="keywordflow">if</span> (ExecutionInfo.Errors.Num() &gt; 0)</div><div class="line">    {</div><div class="line">        bResult = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> bResult;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// BLOB test</span></div><div class="line"><span class="keyword">struct </span><a class="code" href="structblob__table__creator.html">blob_table_creator</a> : <span class="keyword">public</span> <a class="code" href="classsoci_1_1tests_1_1table__creator__base.html#aa3618dbba579c748dff88baea6cd8134">table_creator_base</a></div><div class="line">{</div><div class="line">    <a class="code" href="structblob__table__creator.html#aa8e2b7e8a925fa4dd57bdea113d498d9">blob_table_creator</a>(<a class="code" href="classsoci_1_1session.html">soci::session</a> &amp; sql)</div><div class="line">        : <a class="code" href="classsoci_1_1tests_1_1table__creator__base.html#aa3618dbba579c748dff88baea6cd8134">table_creator_base</a>(sql)</div><div class="line">    {</div><div class="line">        sql &lt;&lt;</div><div class="line">            <span class="stringliteral">&quot;create table soci_test (&quot;</span></div><div class="line">            <span class="stringliteral">&quot;    id integer,&quot;</span></div><div class="line">            <span class="stringliteral">&quot;    img blob&quot;</span></div><div class="line">            <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line">    }</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line">IMPLEMENT_SIMPLE_AUTOMATION_TEST(FHorizonSqlite3Blob, <span class="stringliteral">&quot;Horizon.SOCI.Sqlite3.UnitTest.[sqlite][blob]&quot;</span>, EAutomationTestFlags::ApplicationContextMask | EAutomationTestFlags::ProductFilter)</div><div class="line">bool FHorizonSqlite3Blob::RunTest(const FString&amp; Parameters)</div><div class="line">{</div><div class="line">    <span class="keywordtype">bool</span> bResult = <span class="keyword">true</span>;</div><div class="line">    <a class="code" href="classsoci_1_1session.html">soci::session</a> sql(<a class="code" href="test-db2_8cpp.html#a309d5a2c70059eea6a837ea7f1e80958">backEnd</a>, <a class="code" href="test-db2_8cpp.html#ae915c40e51ff21764f98faa8bd2b68d3">connectString</a>);</div><div class="line"></div><div class="line">    <a class="code" href="structblob__table__creator.html">blob_table_creator</a> tableCreator(sql);</div><div class="line"></div><div class="line">    <span class="keywordtype">char</span> buf[] = <span class="stringliteral">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>;</div><div class="line"></div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(id, img) values(7, &#39;&#39;)&quot;</span>;</div><div class="line"></div><div class="line">    {</div><div class="line">        <a class="code" href="classsoci_1_1blob.html">soci::blob</a> b(sql);</div><div class="line"></div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;select img from soci_test where id = 7&quot;</span>, <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">soci::into</a>(b);</div><div class="line">        TestEqual(TEXT(<span class="stringliteral">&quot;b.get_len() == 0&quot;</span>), (<span class="keywordtype">int</span>)b.get_len(), 0);</div><div class="line">        b.write(0, buf, <span class="keyword">sizeof</span>(buf));</div><div class="line">        TestEqual(TEXT(<span class="stringliteral">&quot;b.get_len() == sizeof(buf)&quot;</span>), b.get_len(), <span class="keyword">sizeof</span>(buf));</div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;update soci_test set img=? where id = 7&quot;</span>, <a class="code" href="namespacesoci.html#a9f59a2e8d19664d5e1eae175936f1b4e">soci::use</a>(b);</div><div class="line"></div><div class="line">        b.append(buf, <span class="keyword">sizeof</span>(buf));</div><div class="line">        TestEqual(TEXT(<span class="stringliteral">&quot;b.get_len() == 2 * sizeof(buf)&quot;</span>), b.get_len(), 2 * <span class="keyword">sizeof</span>(buf));</div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(id, img) values(8, ?)&quot;</span>, <a class="code" href="namespacesoci.html#a9f59a2e8d19664d5e1eae175936f1b4e">soci::use</a>(b);</div><div class="line">    }</div><div class="line">    {</div><div class="line">        <a class="code" href="classsoci_1_1blob.html">soci::blob</a> b(sql);</div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;select img from soci_test where id = 8&quot;</span>, <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">soci::into</a>(b);</div><div class="line">        TestEqual(TEXT(<span class="stringliteral">&quot;b.get_len() == 2 * sizeof(buf)&quot;</span>), b.get_len(), 2 * <span class="keyword">sizeof</span>(buf));</div><div class="line">        <span class="keywordtype">char</span> buf2[100];</div><div class="line">        b.read(0, buf2, 10);</div><div class="line">        TestEqual(TEXT(<span class="stringliteral">&quot;std::strncmp(buf2, \&quot;abcdefghij\&quot;, 10) == 0&quot;</span>), std::strncmp(buf2, <span class="stringliteral">&quot;abcdefghij&quot;</span>, 10), 0);</div><div class="line"></div><div class="line"></div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;select img from soci_test where id = 7&quot;</span>, <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">into</a>(b);</div><div class="line">        TestEqual(TEXT(<span class="stringliteral">&quot;b.get_len() == sizeof(buf)&quot;</span>), b.get_len(), <span class="keyword">sizeof</span>(buf));</div><div class="line"></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (ExecutionInfo.Errors.Num() &gt; 0)</div><div class="line">    {</div><div class="line">        bResult = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> bResult;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// This test was put in to fix a problem that occurs when there are both</span></div><div class="line"><span class="comment">// into and use elements in the same query and one of them (into) binds</span></div><div class="line"><span class="comment">// to a vector object.</span></div><div class="line"></div><div class="line"><span class="keyword">struct </span><a class="code" href="structtest3__table__creator.html">test3_table_creator</a> : <a class="code" href="classsoci_1_1tests_1_1table__creator__base.html#aa3618dbba579c748dff88baea6cd8134">table_creator_base</a></div><div class="line">{</div><div class="line">    <a class="code" href="structtest3__table__creator.html">test3_table_creator</a>(<a class="code" href="classsoci_1_1session.html">soci::session</a> &amp; sql) : <a class="code" href="classsoci_1_1tests_1_1table__creator__base.html#aa3618dbba579c748dff88baea6cd8134">table_creator_base</a>(sql)</div><div class="line">    {</div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;create table soci_test( id integer, name varchar, subname varchar);&quot;</span>;</div><div class="line">    }</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line">IMPLEMENT_SIMPLE_AUTOMATION_TEST(FHorizonSqlite3UseAndVectorInfo, <span class="stringliteral">&quot;Horizon.SOCI.Sqlite3.UnitTest.[sqlite][use][into][vector]&quot;</span>, EAutomationTestFlags::ApplicationContextMask | EAutomationTestFlags::ProductFilter)</div><div class="line">bool FHorizonSqlite3UseAndVectorInfo::RunTest(const FString&amp; Parameters)</div><div class="line">{</div><div class="line">    <span class="keywordtype">bool</span> bResult = <span class="keyword">true</span>;</div><div class="line"></div><div class="line"></div><div class="line">    <a class="code" href="classsoci_1_1session.html">soci::session</a> sql(<a class="code" href="test-db2_8cpp.html#a309d5a2c70059eea6a837ea7f1e80958">backEnd</a>, <a class="code" href="test-db2_8cpp.html#ae915c40e51ff21764f98faa8bd2b68d3">connectString</a>);</div><div class="line"></div><div class="line">    <a class="code" href="structtest3__table__creator.html">test3_table_creator</a> tableCreator(sql);</div><div class="line"></div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(id,name,subname) values( 1,&#39;john&#39;,&#39;smith&#39;)&quot;</span>;</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(id,name,subname) values( 2,&#39;george&#39;,&#39;vals&#39;)&quot;</span>;</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(id,name,subname) values( 3,&#39;ann&#39;,&#39;smith&#39;)&quot;</span>;</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(id,name,subname) values( 4,&#39;john&#39;,&#39;grey&#39;)&quot;</span>;</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(id,name,subname) values( 5,&#39;anthony&#39;,&#39;wall&#39;)&quot;</span>;</div><div class="line"></div><div class="line">    {</div><div class="line">        std::vector&lt;int&gt; v(10);</div><div class="line"></div><div class="line">        statement s(sql.prepare &lt;&lt; <span class="stringliteral">&quot;Select id from soci_test where name = :name&quot;</span>);</div><div class="line"></div><div class="line">        std::string name = <span class="stringliteral">&quot;john&quot;</span>;</div><div class="line"></div><div class="line">        s.exchange(<a class="code" href="namespacesoci.html#a9f59a2e8d19664d5e1eae175936f1b4e">use</a>(name, <span class="stringliteral">&quot;name&quot;</span>));</div><div class="line">        s.exchange(<a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">into</a>(v));</div><div class="line"></div><div class="line">        s.define_and_bind();</div><div class="line">        s.execute(<span class="keyword">true</span>);</div><div class="line">        TestEqual(TEXT(<span class="stringliteral">&quot;v.size() == 2&quot;</span>), (<span class="keywordtype">int</span>)v.size(), 2);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (ExecutionInfo.Errors.Num() &gt; 0)</div><div class="line">    {</div><div class="line">        bResult = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> bResult;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// Test case from Amnon David 11/1/2007</span></div><div class="line"><span class="comment">// I&#39;ve noticed that table schemas in SQLite3 can sometimes have typeless</span></div><div class="line"><span class="comment">// columns. One (and only?) example is the sqlite_sequence that sqlite</span></div><div class="line"><span class="comment">// creates for autoincrement . Attempting to traverse this table caused</span></div><div class="line"><span class="comment">// SOCI to crash. I&#39;ve made the following code change in statement.cpp to</span></div><div class="line"><span class="comment">// create a workaround:</span></div><div class="line"></div><div class="line"><span class="keyword">struct </span><a class="code" href="structtest4__table__creator.html">test4_table_creator</a> : <a class="code" href="classsoci_1_1tests_1_1table__creator__base.html#aa3618dbba579c748dff88baea6cd8134">table_creator_base</a></div><div class="line">{</div><div class="line">    <a class="code" href="structtest4__table__creator.html">test4_table_creator</a>(<a class="code" href="classsoci_1_1session.html">soci::session</a> &amp; sql) : <a class="code" href="classsoci_1_1tests_1_1table__creator__base.html#aa3618dbba579c748dff88baea6cd8134">table_creator_base</a>(sql)</div><div class="line">    {</div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;create table soci_test (col INTEGER PRIMARY KEY AUTOINCREMENT, name char)&quot;</span>;</div><div class="line">    }</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line">IMPLEMENT_SIMPLE_AUTOMATION_TEST(FHorizonSqlite3Sequence, <span class="stringliteral">&quot;Horizon.SOCI.Sqlite3.UnitTest.[sqlite][sequence]&quot;</span>, EAutomationTestFlags::ApplicationContextMask | EAutomationTestFlags::ProductFilter)</div><div class="line">bool FHorizonSqlite3Sequence::RunTest(const FString&amp; Parameters)</div><div class="line">{</div><div class="line">    <span class="keywordtype">bool</span> bResult = <span class="keyword">true</span>;</div><div class="line">    <span class="comment">// we need to have an table that uses autoincrement to test this.</span></div><div class="line">    <a class="code" href="classsoci_1_1session.html">soci::session</a> sql(<a class="code" href="test-db2_8cpp.html#a309d5a2c70059eea6a837ea7f1e80958">backEnd</a>, <a class="code" href="test-db2_8cpp.html#ae915c40e51ff21764f98faa8bd2b68d3">connectString</a>);</div><div class="line"></div><div class="line">    <a class="code" href="structtest4__table__creator.html">test4_table_creator</a> tableCreator(sql);</div><div class="line"></div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(name) values(&#39;john&#39;)&quot;</span>;</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(name) values(&#39;james&#39;)&quot;</span>;</div><div class="line"></div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> key;</div><div class="line">        std::string name;</div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;select * from soci_test&quot;</span>, <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">into</a>(key), <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">into</a>(name);</div><div class="line"></div><div class="line">        TestEqual(TEXT(<span class="stringliteral">&quot;name == john&quot;</span>), name, std::string(<span class="stringliteral">&quot;john&quot;</span>));</div><div class="line">        rowset&lt;row&gt; rs = (sql.prepare &lt;&lt; <span class="stringliteral">&quot;select * from sqlite_sequence&quot;</span>);</div><div class="line">        rowset&lt;row&gt;::const_iterator it = rs.begin();</div><div class="line">        row <span class="keyword">const</span>&amp; r1 = (*it);</div><div class="line"></div><div class="line">        TestEqual(TEXT(<span class="stringliteral">&quot;r1.get&lt;std::string&gt;(0) == \&quot;soci_test\&quot;&quot;</span>), r1.get&lt;std::string&gt;(0), std::string(<span class="stringliteral">&quot;soci_test&quot;</span>));</div><div class="line">        TestEqual(TEXT(<span class="stringliteral">&quot;r1.get&lt;std::string&gt;(1) == \&quot;2\&quot;&quot;</span>), r1.get&lt;std::string&gt;(1), std::string(<span class="stringliteral">&quot;2&quot;</span>));</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span> (ExecutionInfo.Errors.Num() &gt; 0)</div><div class="line">    {</div><div class="line">        bResult = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> bResult;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">struct </span><a class="code" href="structlonglong__table__creator.html">longlong_table_creator</a> : <a class="code" href="classsoci_1_1tests_1_1table__creator__base.html#aa3618dbba579c748dff88baea6cd8134">table_creator_base</a></div><div class="line">{</div><div class="line">    <a class="code" href="structlonglong__table__creator.html">longlong_table_creator</a>(<a class="code" href="classsoci_1_1session.html">soci::session</a> &amp; sql)</div><div class="line">        : <a class="code" href="classsoci_1_1tests_1_1table__creator__base.html#aa3618dbba579c748dff88baea6cd8134">table_creator_base</a>(sql)</div><div class="line">    {</div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;create table soci_test(val number(20))&quot;</span>;</div><div class="line">    }</div><div class="line">};</div><div class="line"></div><div class="line">IMPLEMENT_SIMPLE_AUTOMATION_TEST(FHorizonSqlite3LongLong, <span class="stringliteral">&quot;Horizon.SOCI.Sqlite3.UnitTest.[sqlite][longlong]&quot;</span>, EAutomationTestFlags::ApplicationContextMask | EAutomationTestFlags::ProductFilter)</div><div class="line">bool FHorizonSqlite3LongLong::RunTest(const FString&amp; Parameters)</div><div class="line">{</div><div class="line">    <span class="keywordtype">bool</span> bResult = <span class="keyword">true</span>;</div><div class="line">    <a class="code" href="classsoci_1_1session.html">soci::session</a> sql(<a class="code" href="test-db2_8cpp.html#a309d5a2c70059eea6a837ea7f1e80958">backEnd</a>, <a class="code" href="test-db2_8cpp.html#ae915c40e51ff21764f98faa8bd2b68d3">connectString</a>);</div><div class="line"></div><div class="line">    <a class="code" href="structlonglong__table__creator.html">longlong_table_creator</a> tableCreator(sql);</div><div class="line"></div><div class="line">    <span class="keywordtype">long</span> <span class="keywordtype">long</span> v1 = 1000000000000LL;</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(val) values(:val)&quot;</span>, <a class="code" href="namespacesoci.html#a9f59a2e8d19664d5e1eae175936f1b4e">use</a>(v1);</div><div class="line"></div><div class="line">    <span class="keywordtype">long</span> <span class="keywordtype">long</span> v2 = 0LL;</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;select val from soci_test&quot;</span>, <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">into</a>(v2);</div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;v2 == v1&quot;</span>), v2, v1);</div><div class="line">    <span class="keywordflow">if</span> (ExecutionInfo.Errors.Num() &gt; 0)</div><div class="line">    {</div><div class="line">        bResult = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> bResult;</div><div class="line">}</div><div class="line"></div><div class="line">IMPLEMENT_SIMPLE_AUTOMATION_TEST(FHorizonSqlite3VectorLongLong, <span class="stringliteral">&quot;Horizon.SOCI.Sqlite3.UnitTest.[sqlite][vector][longlong]&quot;</span>, EAutomationTestFlags::ApplicationContextMask | EAutomationTestFlags::ProductFilter)</div><div class="line">bool FHorizonSqlite3VectorLongLong::RunTest(const FString&amp; Parameters)</div><div class="line">{</div><div class="line">    <span class="keywordtype">bool</span> bResult = <span class="keyword">true</span>;</div><div class="line">    <a class="code" href="classsoci_1_1session.html">soci::session</a> sql(<a class="code" href="test-db2_8cpp.html#a309d5a2c70059eea6a837ea7f1e80958">backEnd</a>, <a class="code" href="test-db2_8cpp.html#ae915c40e51ff21764f98faa8bd2b68d3">connectString</a>);</div><div class="line"></div><div class="line">    <a class="code" href="structlonglong__table__creator.html">longlong_table_creator</a> tableCreator(sql);</div><div class="line"></div><div class="line">    std::vector&lt;long long&gt; v1;</div><div class="line">    v1.push_back(1000000000000LL);</div><div class="line">    v1.push_back(1000000000001LL);</div><div class="line">    v1.push_back(1000000000002LL);</div><div class="line">    v1.push_back(1000000000003LL);</div><div class="line">    v1.push_back(1000000000004LL);</div><div class="line"></div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test(val) values(:val)&quot;</span>, <a class="code" href="namespacesoci.html#a9f59a2e8d19664d5e1eae175936f1b4e">use</a>(v1);</div><div class="line"></div><div class="line">    std::vector&lt;long long&gt; v2(10);</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;select val from soci_test order by val desc&quot;</span>, <a class="code" href="namespacesoci.html#a29009895cde3cbdbeb5dab6387372dc9">into</a>(v2);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;v2.size() == 5&quot;</span>), (<span class="keywordtype">int</span>)v2.size(), 5);</div><div class="line"></div><div class="line"></div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;v2[0] == 1000000000004LL&quot;</span>), v2[0], 1000000000004LL);</div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;v2[1] == 1000000000003LL&quot;</span>), v2[1], 1000000000003LL);</div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;v2[2] == 1000000000002LL&quot;</span>), v2[2], 1000000000002LL);</div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;v2[3] == 1000000000001LL&quot;</span>), v2[3], 1000000000001LL);</div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;v2[4] == 1000000000000LL&quot;</span>), v2[4], 1000000000000LL);</div><div class="line">    <span class="keywordflow">if</span> (ExecutionInfo.Errors.Num() &gt; 0)</div><div class="line">    {</div><div class="line">        bResult = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> bResult;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">struct </span><a class="code" href="structtable__creator__for__get__last__insert__id.html">table_creator_for_get_last_insert_id</a> : <a class="code" href="classsoci_1_1tests_1_1table__creator__base.html#aa3618dbba579c748dff88baea6cd8134">table_creator_base</a></div><div class="line">{</div><div class="line">    <a class="code" href="structtable__creator__for__get__last__insert__id.html">table_creator_for_get_last_insert_id</a>(<a class="code" href="classsoci_1_1session.html">soci::session</a> &amp; sql)</div><div class="line">        : <a class="code" href="classsoci_1_1tests_1_1table__creator__base.html#aa3618dbba579c748dff88baea6cd8134">table_creator_base</a>(sql)</div><div class="line">    {</div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;create table soci_test(id integer primary key autoincrement)&quot;</span>;</div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test (id) values (41)&quot;</span>;</div><div class="line">        sql &lt;&lt; <span class="stringliteral">&quot;delete from soci_test where id = 41&quot;</span>;</div><div class="line">    }</div><div class="line">};</div><div class="line"></div><div class="line">IMPLEMENT_SIMPLE_AUTOMATION_TEST(FHorizonSqlite3LastInsert, <span class="stringliteral">&quot;Horizon.SOCI.Sqlite3.UnitTest.[sqlite][last-insert-id]&quot;</span>, EAutomationTestFlags::ApplicationContextMask | EAutomationTestFlags::ProductFilter)</div><div class="line">bool FHorizonSqlite3LastInsert::RunTest(const FString&amp; Parameters)</div><div class="line">{</div><div class="line">    <span class="keywordtype">bool</span> bResult = <span class="keyword">true</span>;</div><div class="line">    <a class="code" href="classsoci_1_1session.html">soci::session</a> sql(<a class="code" href="test-db2_8cpp.html#a309d5a2c70059eea6a837ea7f1e80958">backEnd</a>, <a class="code" href="test-db2_8cpp.html#ae915c40e51ff21764f98faa8bd2b68d3">connectString</a>);</div><div class="line">    <a class="code" href="structtable__creator__for__get__last__insert__id.html">table_creator_for_get_last_insert_id</a> tableCreator(sql);</div><div class="line">    sql &lt;&lt; <span class="stringliteral">&quot;insert into soci_test default values&quot;</span>;</div><div class="line">    <span class="keywordtype">long</span> id;</div><div class="line">    <span class="keywordtype">bool</span> result = sql.get_last_insert_id(<span class="stringliteral">&quot;soci_test&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"></div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;result == true&quot;</span>), result, <span class="keyword">true</span>);</div><div class="line">    TestEqual(TEXT(<span class="stringliteral">&quot;id == 42&quot;</span>), <span class="keywordtype">id</span>, (<span class="keywordtype">long</span>)42);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (ExecutionInfo.Errors.Num() &gt; 0)</div><div class="line">    {</div><div class="line">        bResult = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> bResult;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
